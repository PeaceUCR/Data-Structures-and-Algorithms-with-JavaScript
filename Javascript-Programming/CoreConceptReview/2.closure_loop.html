<!doctype>
<html>
  <head></head>
  <body>
    <div>
      <button>0</button>
      <button>1</button>
      <button>2</button>
      <button>3</button>
    </div>
    <script>
    (function wrapper() {
      var bottons = document.querySelectorAll('button');
      for(var i  = 0; i <bottons.length; i++) {
        bottons[i].addEventListener('click', function(){
          console.log(i);
        })


        /*
        (function(j) {
          bottons[j].addEventListener('click', function(){
            console.log(j);
          })
        }(i))
        */
      }
    }())

    ( function (){
      const arr = [];
      for (var i=0; i < 3; i++) {
          arr.push(() => i);
      }
      const result = arr.map(x => x());
      console.log(result);
    }() )
    </script>
  </body>
</html>
